<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>PMASE Tools Test Runner</title>
  <link rel="stylesheet" href="./lib/mocha.css" />
</head>
<body>
  <div id="app"></div>
  
  <div id="mocha"></div>
  
  <script src="./lib/jquery.js"></script>
  <script src="./lib/d3.js"></script>
  <script src="../lib/reference/reference.js"></script>
  <script src="./lib/chai.js"></script>
  <script src="./lib/mocha.js"></script>
  <script src="./lib/yadda.js"></script>
  
  <script>
    mocha.setup('bdd');
    chai.should();
  </script>
  
  <script src="./steps.js"></script>
  
  
  <script>
    var yadda = require('yadda'),
      Yadda = yadda.Yadda,
      parser = new yadda.parsers.TextParser();

    $.get("features.feature", function(text){
      describe("features", function(){
        $.each(parser.parse(text), function(idx, scenario){
          var ctx = {ctx: {}};
          it(scenario.title, function(done) {
              (new Yadda(library)).yadda(scenario.steps, ctx, done);
          });
        });
      });
      
      mocha.run();
    });
    
  </script>
</body>
</html>