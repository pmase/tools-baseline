<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>PMASE Tools Test Runner</title>
  <link rel="stylesheet" href="./lib/mocha.css" />
</head>
<body>
  <h1>PMASE Tools</h1>
  <div id="mocha"></div>
  
  <script src="./lib/jquery.js"></script>
  <script src="./lib/mocha.js"></script>
  <script src="./lib/yadda.js"></script>
  
  <script>
    mocha.setup('bdd');
    
    function assert(expr, msg) {
      if (!expr) throw new Error(msg || 'failed');
    }
    
    assert.equal = function(a, b, msg){
      assert(a === b, msg);
    };
    
    assert.contains = function(a, b, msg){
      assert(a.indexOf(b) !== -1, msg);
    };
  </script>
  
  <script src="./steps.js"></script>
  
  
  <script>
    var yadda = require('yadda'),
      Yadda = yadda.Yadda,
      parser = new yadda.parsers.TextParser();

    $.get("features.feature", function(text){
      describe("features", function(){
        $.each(parser.parse(text), function(idx, scenario){
          it(scenario.title, function(done) {
              (new Yadda(library)).yadda(scenario.steps, done);
          });
        });
      });
      
      if (window.mochaPhantomJS){
        mochaPhantomJS.run();
      } else {
        mocha.run(); 
      }
    });
    
  </script>
</body>
</html>